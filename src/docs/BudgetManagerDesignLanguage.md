# Budget Manager Application Design Language

An application for managing a budget is the outcome here. Budgets are about tracking income versus spending and managing that to goals. Budget goals including limiting spending in defined categories, savings for categories, etc. These are the words for the Design Language of the Budget Manager (BudMan) application.

Words mean something. Much is written about a design language, but what I have in mind is, first, to tell the narrative story of the applications purpose and value to its users. Then, establish a vocabulary that will be consistent when describing the design and implementation of the applications. Here is the BudMan narrative. Key words are placed in __bold__, nouns and verbs.

## Managing to a Budget

All people, families, businesses and organizations have a budget, managed or not. The budget is a framework and practices to know how much money is coming in and going out. Most budgets are related to income and spending, making money and spending money. Our __Budget Model__ is straight-forward. Money is tracked by by transactions occurring with __Financial Institutions (FI)__ such as banks and brokerage firms. Typically, one uses __Accounts__ with an FI and can obtain a record of all transactions for each account either by a statement document, online banking, or downloading a file. BudMan refers to such data collections as __Workbooks (WB)__ , specifically, Excel workbooks or csv files. A workbook is from a specific FI and contains rows of transaction information, such as date, amount, description, etc.

Tracking income and expenses over time is critical to the value of a budget. Often, FI's will update account status on a monthly basis, issuing statements, or workbooks in the BudMan narrative. There will be workbooks from each FI, at least for each month, and perhaps separately for each account. Gathering the new input into the budget for user benefit requires processing the workbooks, and hence, a means to manage that processing. BudMan uses __Workflows (WF)__ to handle the processing. A workflow is a series of tasks performed on the workbooks. A task uses input, produces output, and may utilize working copies of data for a time.

### Model Design

Using MVVM, the Model is concerned with data and storage. Our design here factors the Model into two component concepts, one for data referred to as the __Budget Domain Model__ (BDM), and one for storage, the __Budget Storage Model__ (BSM). The BDM is a domain model concerning with the data and behavior (code) associated with it. A package named `budget_domain_model` defines classes and modules with the major class for the BDM named __BudgetDomainModel__. At present, the BSM resides in the package `budget_storage_model`.

For flexibility and code reuse, the MVVM pattern encourages loose-coupling through lazy, run-time binding  to specific concrete implementations of the components through Dependency Injection. For the Model, a key differences between concrete implementations is how data is stored. A storable object used for BDM data is referred to as the __BDM_STORE__ object, a dictionary with absolute mapping to/from json. A __BDM_STORE__ is a data object that is stored using a __URL__ for reference. It is not an explicit _type_, has a defined schema of attributes representable in json, and defines an abstract interface implemented by concrete classes or functions. The __URL__ to a __BDM_STORE__ object is referred to as the __BDM_URL__. With a __BDM_URL__, the model can move the data back and forth from storage depending on the _scheme_ of the __BDM_URL__.

In the beginning, the local filesystem is used. But the design couples through a __URL__ specified for the __BDM_STORE__. This value may be configurable, but the Model design does not know anything about how the configuration is maintained in other layers of an application. When the BudgetDomainModel() is accessed, it will be through the __URL__. A file://-type __URL__ indicates the local filesystem and the pathname is extracted from the __URL__.

When dealing with data and storage in a Model, there is always functionality devoted to loading and storing existing data objects as well as creation of new data objects, how to specify default values, etc. With this design, a __BDM_STORE__ object begins with a creation function. A __BDM_CONFIG__ object is used to specify initial values used when instantiating a new object. Great effort has been devoted to maintain the same _schema_ for both __BDM_STORE__ and __BDM_CONFIG__ object data content. In the `budget_domain_model` package, the `BDMConfig` class has the job to provide __BDM_CONFIG__ objects used to instantiate `BudgetDomainModel` instances from __BDM_CONFIG__ objects. Two scenarios are provided. First, the `BDMConfig` class can load a __BDM_STORE__ object from a __BDM_URL__ and provide it as a __BDM_CONFIG__ object. Second, the `BDMConfig` class can provide a pristine __BDM_CONFIG__ object based on internal default values. Applications can further modify the __BDM_CONFIG__ object in other ways prior to providing it to instantiate a `BudgetDomainModel` class instance.

Keep application settings and configuration out of the Model design. Do not use outside config/settings objects to initialize the model. The BDMConfig is used as a default object to create a new __BDM_STORE__ object which can then be modified and used to initialize a new BUDMAN_MODEL_STORE before saving it the first time.
